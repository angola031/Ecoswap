#!/usr/bin/env node

/**
 * Script para crear datos de prueba en validacion_usuario
 */

console.log('üìã CREANDO DATOS DE PRUEBA PARA VALIDACI√ìN')
console.log('==========================================')

console.log('\nüîß SCRIPT DE CREACI√ìN DE DATOS:')
console.log('')
console.log('Este script te ayudar√° a crear datos de prueba en la tabla validacion_usuario')
console.log('para que puedas probar la funcionalidad de verificaci√≥n de identidad.')

console.log('\nüìã PASOS PARA CREAR DATOS DE PRUEBA:')
console.log('')
console.log('1Ô∏è‚É£ VERIFICAR USUARIOS EXISTENTES:')
console.log('')
console.log('Ejecuta esta consulta en Supabase SQL Editor:')
console.log('')
console.log('```sql')
console.log('-- Ver usuarios existentes')
console.log('SELECT user_id, nombre, apellido, email, es_admin, verificado')
console.log('FROM usuario')
console.log('WHERE es_admin = false')
console.log('ORDER BY user_id DESC')
console.log('LIMIT 5;')
console.log('```')
console.log('')
console.log('2Ô∏è‚É£ CREAR VALIDACIONES DE PRUEBA:')
console.log('')
console.log('Ejecuta esta consulta reemplazando USER_ID_1, USER_ID_2, etc. con IDs reales:')
console.log('')
console.log('```sql')
console.log('-- Crear validaciones de prueba')
console.log('INSERT INTO validacion_usuario (usuario_id, tipo_validacion, estado, fecha_solicitud)')
console.log('VALUES')
console.log('  (USER_ID_1, \'identidad\', \'pendiente\', CURRENT_TIMESTAMP),')
console.log('  (USER_ID_2, \'identidad\', \'en_revision\', CURRENT_TIMESTAMP),')
console.log('  (USER_ID_3, \'identidad\', \'pendiente\', CURRENT_TIMESTAMP - INTERVAL \'1 day\');')
console.log('```')
console.log('')
console.log('3Ô∏è‚É£ VERIFICAR QUE SE CREARON:')
console.log('')
console.log('```sql')
console.log('-- Verificar validaciones creadas')
console.log('SELECT v.validacion_id, v.usuario_id, v.estado, v.fecha_solicitud,')
console.log('       u.nombre, u.apellido, u.email')
console.log('FROM validacion_usuario v')
console.log('JOIN usuario u ON v.usuario_id = u.user_id')
console.log('WHERE v.tipo_validacion = \'identidad\'')
console.log('ORDER BY v.fecha_solicitud DESC;')
console.log('```')

console.log('\nüîß ALTERNATIVA: CREAR USUARIOS DE PRUEBA:')
console.log('')
console.log('Si no tienes usuarios, puedes crear algunos de prueba:')
console.log('')
console.log('```sql')
console.log('-- Crear usuarios de prueba')
console.log('INSERT INTO usuario (nombre, apellido, email, password_hash, es_admin, verificado)')
console.log('VALUES')
console.log('  (\'Juan\', \'P√©rez\', \'juan.perez@test.com\', \'$2a$10$example\', false, false),')
console.log('  (\'Mar√≠a\', \'Garc√≠a\', \'maria.garcia@test.com\', \'$2a$10$example\', false, false),')
console.log('  (\'Carlos\', \'L√≥pez\', \'carlos.lopez@test.com\', \'$2a$10$example\', false, false);')
console.log('```')
console.log('')
console.log('Luego crea las validaciones:')
console.log('')
console.log('```sql')
console.log('-- Crear validaciones para los usuarios de prueba')
console.log('INSERT INTO validacion_usuario (usuario_id, tipo_validacion, estado, fecha_solicitud)')
console.log('SELECT user_id, \'identidad\', \'pendiente\', CURRENT_TIMESTAMP')
console.log('FROM usuario')
console.log('WHERE email IN (\'juan.perez@test.com\', \'maria.garcia@test.com\', \'carlos.lopez@test.com\');')
console.log('```')

console.log('\nüß™ PASOS PARA PROBAR:')
console.log('')
console.log('1. üîÑ REINICIAR EL SERVIDOR:')
console.log('   ‚Ä¢ Det√©n el servidor (Ctrl+C)')
console.log('   ‚Ä¢ Ejecuta: npm run dev')
console.log('')
console.log('2. üåê PROBAR EL DASHBOARD:')
console.log('   ‚Ä¢ Ve a: http://localhost:3000/admin/verificaciones')
console.log('   ‚Ä¢ Haz clic en "Validar Identidad"')
console.log('   ‚Ä¢ Deber√≠as ver las validaciones creadas')
console.log('')
console.log('3. üìä VERIFICAR LOGS:')
console.log('   ‚Ä¢ Abre DevTools ‚Üí Console')
console.log('   ‚Ä¢ Deber√≠as ver: "üìã Validaciones encontradas: X"')
console.log('   ‚Ä¢ No deber√≠a haber errores')

console.log('\n‚ö†Ô∏è NOTAS IMPORTANTES:')
console.log('')
console.log('üìù ESTRUCTURA DE TABLA VALIDACION_USUARIO:')
console.log('‚Ä¢ validacion_id (SERIAL PRIMARY KEY)')
console.log('‚Ä¢ usuario_id (INTEGER REFERENCES USUARIO)')
console.log('‚Ä¢ tipo_validacion (VARCHAR(30)) - valores: \'identidad\', \'telefono\', etc.')
console.log('‚Ä¢ estado (VARCHAR(20)) - valores: \'pendiente\', \'en_revision\', \'aprobada\', \'rechazada\'')
console.log('‚Ä¢ fecha_solicitud (TIMESTAMP)')
console.log('‚Ä¢ notas_admin (TEXT)')
console.log('‚Ä¢ motivo_rechazo (TEXT)')
console.log('')
console.log('üîë PERMISOS REQUERIDOS:')
console.log('‚Ä¢ El usuario de Supabase debe tener permisos de INSERT y SELECT')
console.log('‚Ä¢ Verificar pol√≠ticas RLS en Supabase Dashboard')
console.log('')
console.log('üéØ ESTADOS V√ÅLIDOS:')
console.log('‚Ä¢ \'pendiente\' - Esperando revisi√≥n')
console.log('‚Ä¢ \'en_revision\' - Siendo revisado por admin')
console.log('‚Ä¢ \'aprobada\' - Aprobado por admin')
console.log('‚Ä¢ \'rechazada\' - Rechazado por admin')
console.log('‚Ä¢ \'expirada\' - Expirado sin revisi√≥n')

console.log('\n‚úÖ INDICADORES DE √âXITO:')
console.log('')
console.log('üéØ EN EL DASHBOARD:')
console.log('‚Ä¢ Se muestra la lista de verificaciones pendientes')
console.log('‚Ä¢ Se pueden ver nombres de usuarios')
console.log('‚Ä¢ Se puede hacer clic en "Revisar"')
console.log('‚Ä¢ No aparece el error "Error cargando validaciones"')
console.log('')
console.log('üéØ EN LA CONSOLA:')
console.log('‚Ä¢ "üìã Validaciones encontradas: 3" (o el n√∫mero que creaste)')
console.log('‚Ä¢ "üìã Datos transformados para UI: [array con datos]"')
console.log('‚Ä¢ No hay errores en rojo')

console.log('\nüöÄ PR√ìXIMOS PASOS:')
console.log('')
console.log('1. Ejecutar las consultas SQL en Supabase')
console.log('2. Crear datos de prueba en validacion_usuario')
console.log('3. Probar la carga de verificaciones en el dashboard')
console.log('4. Verificar que se muestran correctamente')

console.log('\n‚ú® ¬°Con estos datos de prueba podr√°s probar completamente la funcionalidad de verificaci√≥n!')

