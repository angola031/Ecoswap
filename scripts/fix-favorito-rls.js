console.log('üîß Soluci√≥n para Error de RLS en Tabla Favorito');
console.log('');
console.log('‚ùå Error identificado:');
console.log('   "new row violates row-level security policy for table favorito"');
console.log('');
console.log('üìã Este error ocurre porque Supabase tiene Row Level Security (RLS)');
console.log('   habilitado en la tabla "favorito" y no hay pol√≠ticas que permitan');
console.log('   la inserci√≥n desde la aplicaci√≥n.');
console.log('');
console.log('üéØ SOLUCIONES DISPONIBLES:');
console.log('');
console.log('üìå OPCI√ìN 1: Crear pol√≠ticas RLS en Supabase Dashboard');
console.log('');
console.log('1. Ve a tu Supabase Dashboard:');
console.log('   https://app.supabase.com/');
console.log('');
console.log('2. Selecciona tu proyecto');
console.log('');
console.log('3. Ve a Authentication > Policies');
console.log('');
console.log('4. Busca la tabla "favorito" y crea estas pol√≠ticas:');
console.log('');
console.log('   üî∏ Pol√≠tica para SELECT:');
console.log('   Name: "Users can view their own favorites"');
console.log('   Target roles: authenticated');
console.log('   USING expression: (auth.uid()::text = (SELECT auth_user_id FROM usuario WHERE user_id = favorito.usuario_id))');
console.log('');
console.log('   üî∏ Pol√≠tica para INSERT:');
console.log('   Name: "Users can add their own favorites"');
console.log('   Target roles: authenticated');
console.log('   WITH CHECK expression: (auth.uid()::text = (SELECT auth_user_id FROM usuario WHERE user_id = favorito.usuario_id))');
console.log('');
console.log('   üî∏ Pol√≠tica para DELETE:');
console.log('   Name: "Users can delete their own favorites"');
console.log('   Target roles: authenticated');
console.log('   USING expression: (auth.uid()::text = (SELECT auth_user_id FROM usuario WHERE user_id = favorito.usuario_id))');
console.log('');
console.log('üìå OPCI√ìN 2: Deshabilitar RLS temporalmente (NO RECOMENDADO)');
console.log('');
console.log('1. En Supabase Dashboard > Table Editor');
console.log('2. Selecciona la tabla "favorito"');
console.log('3. Ve a Settings > Row Level Security');
console.log('4. Desactiva "Enable Row Level Security"');
console.log('');
console.log('‚ö†Ô∏è  ADVERTENCIA: Esto permite que cualquier usuario modifique');
console.log('   los favoritos de otros usuarios. Solo para desarrollo.');
console.log('');
console.log('üìå OPCI√ìN 3: Usar Service Role Key en la API (IMPLEMENTADO)');
console.log('');
console.log('‚úÖ Esta opci√≥n ya est√° implementada en el c√≥digo.');
console.log('   La API usa SUPABASE_SERVICE_ROLE_KEY que bypassa RLS.');
console.log('');
console.log('üîç Para verificar que funciona:');
console.log('1. Aseg√∫rate de que SUPABASE_SERVICE_ROLE_KEY est√© configurada');
console.log('2. Verifica que el usuario est√© autenticado correctamente');
console.log('3. Revisa los logs de la API para m√°s detalles');
console.log('');
console.log('üí° RECOMENDACI√ìN: Usa la Opci√≥n 1 (crear pol√≠ticas RLS)');
console.log('   Es la soluci√≥n m√°s segura y robusta a largo plazo.');
